<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style-css.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>meta class 3</title>
</head>
<body>
    <div class="contener-body">
        <div class="nav-bar-lift">
            <div class="nav-bar-badiin" id="nav_bar">
                <div class="nav">

                    <div class="sercal1">
                        <i class="fas fa-bars" id="mune"></i>
                        <i class="far fa-times-circle" id="x-nav"></i>
                    </div>

                    <div class="title-list">
                        <h1>meta class 3</h1>
                    </div>
    
                    <div class="list-link">
                        <ul>
                            <li><a href="index.html"><img src="https://img.icons8.com/material/24/000000/home.png"/><span>home</span></a></li>
                            <li><a href="html/profile.html"><img src="https://img.icons8.com/material/24/000000/business-conference-female-speaker.png"/><span>Profile</span></a></li>
                            <li><a href="html/Student-list.php"><img src="https://img.icons8.com/material/24/000000/conference-background-selected.png"/><span>Student list</span></a></li>
                            <li><a href="html/groups.php"><img src="https://img.icons8.com/material/24/000000/business-conference-female-speaker.png"/><span>Courses</span></a></li>
                            <li><a href="html/Iternal-rules.html"><img src="https://img.icons8.com/material/24/000000/detain--v2.png"/><span>Iternal rules</span></a></li>
                            <li class="a-drobdawn"><a id="a-drobdawn"><img src="https://img.icons8.com/material/24/000000/fine-print.png"/><span>days</span><i class="fas fa-angle-right"></i></a>

                                <ul class="drobdawn">
                                    <li><a href="days/Monday.html">Monday</a></li>
                                    <li><a href="days/Tuesday.html">Tuesday</a></li>
                                    <li><a href="days/Wednesday.html">Wednesday</a></li>
                                    <li><a href="days/Thursday.html">Thursday</a></li>
                                    <li><a href="days/Friday.html">Friday</a></li>
                                    <li><a href="days/Saturday.html">Saturday</a></li>
                                    <li><a href="days/Sunday.html">Sunday</a></li>
                                </ul>
                            
                            </li>
                            <li><a href="table-day/day-table.html"><img srcset="https://img.icons8.com/ios/344/day-view.png 2x"/><span>table days</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>


        <div class="content-lyout">
            <div class="contener-lyout loyou-flex">

                <div class="content-re-left">
                    <div class="content-lyout-desc">

                        <div class="left-content-lyout-desc">
                            <h1> Welcome To Meta Class 3</h1>
                            <p> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam libero animi expedita,
                                cupiditate alias et, in at voluptates molestias, doloribus velit dicta! 
                                Officia sit deserunt perspiciatis in ullam error itaque!
                            </p>
                        </div>
    
                        <div class="re-content-lyout-desc">
                            <img src="imags/Developer_activity-bro-removebg-preview.png" alt="">
                        </div>
                    </div>
    
                    <div class="carts">
                        <div class="cart cart1">
                            <div class="top-cart">
                                <div class="icon"><i class="fas fa-users"></i></div>
                                <div class="content-icon">
                                    <p></p>
                                    <p> </p>
                                </div>
                            </div>
                            <div class="content-cart">
                                <p>Student list</p>
                                <p>Here you'll find all student of the class.</p>
                            </div>
                            <div class="link-cart">
                                <a href="html/Student-list.html">Click here</a>
                            </div>
                        </div>
    
                        <div class="cart cart2">
                            <div class="top-cart">
                                <div class="icon"><i class="far fa-clipboard"></i></div>
                                <div class="content-icon">
                                    <p></p>
                                    <p> </p>
                                </div>
                            </div>
                            <div class="content-cart">
                                <p>Time tabl</p>
                                <p>Here you'll find the schedule for class.</p>
                            </div>
                            <div class="link-cart">
                                <a href="days/Monday.html">Click here</a>
                            </div>
                        </div>
    
                        <div class="cart cart3">
                            <div class="top-cart">
                                <div class="icon"><i class="fas fa-user-cog"></i></div>
                                <div class="content-icon">
                                    <p></p>
                                    <p> </p>
                                </div>
                            </div>
                            <div class="content-cart">
                                <p>Internal rules</p>
                                <p>Here you'll find internal rules for the class.</p>
                            </div>
                            <div class="link-cart">
                                <a href="html/Iternal-rules.html">Click here</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="list-day">

                    <div class="content-list-day">
                        <h1 id="current-date"></h1>
                        <h2 id="current-time"></h2>
                    </div>

                    <div class="list-to-day">
                        <div class="list-to-day-cart" id="today-program">
                            <div class="loader" style="margin-left: -63px;">
                                <img src="page-loading-gif-14.gif" alt="" width="100%">
                            </div>
                        </div>
                    </div>
                </div>

            </div>


        </div>



    </div>


    <script src="js/app.js"></script>
    <script src="js/program.js"></script>
    <script src="https://kit.fontawesome.com/65e1fe7a04.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <script>
        var notification   = new Audio('notification.wav');
        $(document).ready(function() {
            setInterval(setDateTime, 1000);
        });
        
        function setDateTime()
        {
            $('#current-date').text(moment().format("dddd DD MMMM YYYY"));
            $('#current-time').text(moment().format("HH:mm:ss"));
            setCurrentTodayProgram();
        }
    
        function setCurrentTodayProgram()
        {
            let html = '';
            let current_task_class      = 'gaincart';
            let task_duration           = '00:00';
            let current_task_duration   = '00:00';
            days.forEach(day => {
                //console.log(day.name);
                if(day.name == moment().format("dddd"))
                {
                    day.tasks.forEach(task => {
                        if(current_task_class != 'now' && current_task_class != 'next') current_task_class = 'gaincart';
                        else current_task_class = 'next';
                        
                        task_duration = moment(task.end_time, 'HH:mm').diff(moment(task.start_time, 'HH:mm'));
                        task_duration = moment.utc(task_duration).format("HH:mm");
    
                        if(moment().format("HH:mm") >= task.start_time && moment().format("HH:mm") < task.end_time)
                        {
                            current_task_class = 'now';
                            current_task_duration = moment(task.end_time, 'HH:mm').diff(moment(moment(), 'HH:mm'));
                            current_task_duration = moment.utc(current_task_duration).format("HH:mm:ss");
                            //task_duration = current_task_duration+' / '+task_duration;
    
                            if(current_task_duration == '00:00:00')
                            {
                                notification.play();
                            }   
                        }
                        
                        html += '<div class="cart-list '+current_task_class+'">'
                                    +'<p>'+task.start_time+'</p>'
                                    +'<p>'+task.name+'<span class="timers">('+task_duration+')</span> </p>'
                                    +'<i class="fas fa-circle pf"></i>'
                                +'</div>';

                        if(current_task_class == 'now')
                        {
                            html += '<div class="timer-now"><p>'+current_task_duration+'</p></div>';
                        }
                    });
                }
                
            });
            $('#today-program').html(html);
        }
    </script>


</body>
</html>